openapi: 3.0.3
tags:
  - name: partenaire
    description: Gestion des partenaires intervenant dans les dossiers clients
  - name: dossier
    description: Gestion de dossiers clients
  - name: financement
    description: Gestion des plans de financement dans un dossier client
  - name: simulation
    description: Gestion des simulations d'un plan de financement dans un dossier client
  - name: score
    description: Calcule le score d'un dossier emprunteur
  - name: standalone_simulation
    x-displayName: simulation
    description: Calcule un plan de financement complet relatif à un projet
  - name: standalone_score
    x-displayName: score
    description: Calcule le score d'un dossier emprunteur
  - name: notaire
    description: Calcule les frais de notaires
  - name: impots
    description: Calcule le montant d'imposition
  - name: case_model
    x-displayName: dossier
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Case" />
  - name: simulation_model
    x-displayName: simulation
    description: |
      <SchemaDefinition schemaRef="#/components/schemas/Simulation" />
x-tagGroups:
  - name: Gestion de dossiers
    tags:
      - partenaire
      - dossier
      - financement
      - simulation
      - score
  - name: APIs de calcul
    tags:
      - standalone_simulation
      - standalone_score
      - notaire
      - impots
  - name: Modèles
    tags:
      - case_model
      - simulation_model
info:
  contact:
    name: API Support
  description:
    $ref: ./documentation.md
  title: Toaztr API
  version: 1.0.0
  x-logo:
    altText: Toaztr logo
    url: 'https://www.dev.toaztr.com/assets/logos/full_light.svg'
components:
  securitySchemes:
    toaztr_auth:
      type: oauth2
      description: Toaztr utilise [OAuth2](https://oauth.net/2/) afin de fournir une méthode simple et standard d'authorisation.
      flows:
        clientCredentials:
          tokenUrl: 'https://auth.toaztr.com/oauth2/token'
          scopes:
            cases/read: Accès en lecture aux dossiers
            cases/write: Accès en ecriture aux dossiers
            cases/*: Accès complet aux dossiers
            simulations/budget: Accès aux simulations de budget
            simulations/funding: Accès aux simulations de financement
            simulations/debt_consolidation: Accès aux simulations de consolidation de dette
            simulations/pinel: Accès aux simulations pinel
            simulations/*: Accès à toutes les simulations
            scores/*: Accès au scoring
        authorizationCode:
          authorizationUrl: 'https://auth.toaztr.com/oauth2/authorize'
          tokenUrl: 'https://auth.toaztr.com/oauth2/token'
          scopes:
            cases/read: Accès en lecture aux dossiers
            cases/write: Accès en ecriture aux dossiers
            cases/*: Accès complet aux dossiers
            simulations/budget: Accès aux simulations de budget
            simulations/funding: Accès aux simulations de financement
            simulations/debt_consolidation: Accès aux simulations de consolidation de dette
            simulations/pinel: Accès aux simulations pinel
            simulations/*: Accès à toutes les simulations
            scores/*: Accès au scoring
  responses:
    '400':
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '403':
      description: Not authorized
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '404':
      description: Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '409':
      description: Conflict
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
    '500':
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  parameters:
    id:
      name: id
      in: path
      required: true
      schema:
        type: string
      description: ID unique de la resource
    caseId:
      name: caseId
      in: path
      required: true
      schema:
        type: string
      description: ID du dossier parent
    planId:
      name: planId
      in: path
      required: true
      schema:
        type: string
      description: ID des paramètres du plan de financement parent
    IfMatch:
      name: If-Match
      in: header
      required: false
      schema:
        type: string
      description: ETag de la resource
    'page[size]':
      name: 'page[size]'
      in: query
      required: false
      schema:
        type: number
        minimum: 0
        maximum: 20
        default: 10
      description: Taille de la page à retourner
    'page[after]':
      name: 'page[after]'
      in: query
      required: false
      schema:
        type: string
      description: Curseur à partir duquel la page débute
    'page[before]':
      name: 'page[before]'
      in: query
      required: false
      schema:
        type: string
      description: Curseur à partir duquel la page débute
  schemas:
    Resource:
      title: Resource
      type: object
      description: Resource identifiée par son type et son id
      properties:
        id:
          type: string
          description: ID unique de la resource
          readOnly: true
        type:
          type: string
          description: Type de la resource
        attributes:
          type: object
          description: Attributs de la resource
        meta:
          type: object
          description: Meta-données de la resource
          properties:
            etag:
              type: string
              description: ETag de la resource
              readOnly: true
            created_at:
              type: string
              format: date-time
              description: Date de création de la resource
              readOnly: true
            last_updated_at:
              type: string
              format: date-time
              description: Date de dernière update de la resource
              readOnly: true
      required:
        - type
    CaseResource:
      title: CaseResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - CASE
            attributes:
              $ref: ../models/Case.v1.json
          required:
            - type
      description: Représente un dossier
    ErrorResponse:
      title: ErrorResponse
      type: object
      description: Représente une réponse en erreur
      properties:
        errors:
          type: array
          items:
            type: object
            properties:
              title:
                type: string
                description: Type d'erreur
              detail:
                type: string
                description: Détails de l'erreur
              source:
                type: object
                properties:
                  pointer:
                    type: string
                    description: JSON Pointer vers le field en erreur
                  parameter:
                    type: string
                    description: Nom du paramètre en erreur
                  header:
                    type: string
                    description: Nom du header en erreur
    PaginatedResponse:
      title: PaginatedResponse
      type: object
      description: Page de resources
      properties:
        meta:
          type: object
          properties:
            page:
              type: object
              properties:
                cursor:
                  type: string
                  description: Curseur pointant sur le dernier élément de la page
        links:
          type: object
          properties:
            prev:
              type: string
              description: Lien vers la page précédente
            next:
              type: string
              description: Lien vers la prochaine page
    PartnerResource:
      title: PartnerResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - PARTNER
            attributes:
              $ref: ../models/Partner.v1.json
          required:
            - type
      description: Représente un partenaire
    PlanParametersResource:
      title: PlanParametersResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - PLAN_PARAMETERS
            attributes:
              $ref: ../models/PlanParameters.v1.json
          required:
            - type
      description: Représente les paramètres d'un plan de financement
    SimulationResource:
      title: SimulationResource
      allOf:
        - $ref: '#/components/schemas/Resource'
        - type: object
          properties:
            type:
              type: string
              enum:
                - SIMULATION
            attributes:
              $ref: ../models/Simulation.v1.json
          required:
            - type
      description: Représente une simulation
paths:
  '/v1/cases/{id}':
    delete:
      operationId: deleteCase
      tags:
        - dossier
      description: Supprime un dossier par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un dossier par ID
      security:
        - toaztr_auth:
            - cases/write
    get:
      operationId: getCaseById
      tags:
        - dossier
      description: Retourne un dossier par ID
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CaseResource'
          headers:
            ETag:
              schema:
                type: string
              description: Entity tag de la resource
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un dossier par ID
      security:
        - toaztr_auth:
            - cases/read
    parameters:
      - $ref: '#/components/parameters/id'
    put:
      operationId: putCase
      tags:
        - dossier
      description: Mets à jour un dossier par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseResource'
          description: OK
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un dossier par ID
      security:
        - toaztr_auth:
            - cases/write
  /v1/cases:
    get:
      operationId: getCases
      tags:
        - dossier
      description: Liste les dossiers
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/CaseResource'
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les dossiers
      security:
        - toaztr_auth:
            - cases/read
    post:
      operationId: postCase
      tags:
        - dossier
      description: Crée un dossier
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '201':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/CaseResource'
          description: Created
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un dossier
      security:
        - toaztr_auth:
            - cases/write
    parameters: []
  /v1/simulations/budget:
    post:
      operationId: postBudgetSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de budget
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/BudgetParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: ../models/BudgetResults.v1.json
          description: OK
          headers: {}
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de budget
      security:
        - toaztr_auth:
            - simulations/budget
    parameters: []
  /v1/simulations/funding:
    post:
      operationId: postFundingSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de financement
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/FundingParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: ../models/FundingResults.v1.json
          description: OK
          headers: {}
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de financement
      security:
        - toaztr_auth:
            - simulations/funding
    parameters: []
  /v1/simulations/pinel:
    post:
      operationId: postPinelSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation pinel
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PinelParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: ../models/PinelResults.v1.json
          description: OK
          headers: {}
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation pinel
      security:
        - toaztr_auth:
            - simulations/pinel
    parameters: []
  /v1/simulations/debt_consolidation:
    post:
      operationId: postDebtConsolidationSimulation
      tags:
        - standalone_simulation
      description: Calcule une simulation de consolidation de dettes
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/DebtConsolidationParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: ../models/DebtConsolidationResults.v1.json
          description: OK
          headers: {}
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule une simulation de consolidation de dettes
      security:
        - toaztr_auth:
            - simulations/debt_consolidation
    parameters: []
  /v1/scores:
    post:
      operationId: postScore
      tags:
        - standalone_score
      description: Calcule le score d'un dossier
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Case.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: ../models/Score.v1.json
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule le score d'un dossier
      security:
        - toaztr_auth:
            - scores/*
    parameters: []
  '/v1/partners/{id}':
    delete:
      operationId: deletePartner
      tags:
        - partenaire
      description: Supprime un partenaire par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un partenaire par ID
      security:
        - toaztr_auth:
            - cases/write
    get:
      operationId: getPartnerById
      tags:
        - partenaire
      description: Retourne un partenaire par ID
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PartnerResource'
          description: OK
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un partenaire par ID
      security:
        - toaztr_auth:
            - cases/read
    parameters:
      - $ref: '#/components/parameters/id'
    put:
      operationId: putPartner
      tags:
        - partenaire
      description: Mets à jour un partenaire par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Partner.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PartnerResource'
          description: OK
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un partenaire par ID
      security:
        - toaztr_auth:
            - cases/write
  /v1/partners:
    get:
      operationId: getPartenaires
      tags:
        - partenaire
      description: Liste les partenaires
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      responses:
        '200':
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/PartnerResource'
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Liste les partenaires
      security:
        - toaztr_auth:
            - cases/read
    post:
      operationId: postPartner
      tags:
        - partenaire
      description: Crée un partenaire
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/Partner.v1.json
      responses:
        '201':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PartnerResource'
          description: Created
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un partenaire
      security:
        - toaztr_auth:
            - cases/write
    parameters: []
  /v1/compute/notary_fees:
    post:
      operationId: postNotaryFees
      tags:
        - notaire
      description: Calcule les frais de notaires
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/NotaryFeesParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: ../models/NotaryFees.v1.json
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule les frais de notaires
      security:
        - toaztr_auth:
            - simulations/*
    parameters: []
  /v1/compute/income_tax:
    post:
      operationId: postIncomeTax
      tags:
        - impots
      description: Calcule le montant d'impôts
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/FrenchIncomeTaxParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: ../models/FrenchIncomeTax.v1.json
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Calcule le montant d'impôts
      security:
        - toaztr_auth:
            - simulations/*
  '/v1/cases/{caseId}/plans-parameters/{id}':
    delete:
      operationId: deletePlansParameters
      description: Supprime un plan par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Supprime un plan par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - financement
    get:
      operationId: getPlansParametersById
      description: Retourne un plan par ID
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PlanParametersResource'
          description: OK
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      summary: Retourne un plan par ID
      security:
        - toaztr_auth:
            - cases/read
      tags:
        - financement
    parameters:
      - $ref: '#/components/parameters/id'
      - $ref: '#/components/parameters/caseId'
    put:
      operationId: putPlansParameters
      description: Mets à jour un plan par ID
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PlanParameters.v1.json
      responses:
        '200':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PlanParametersResource'
          description: OK
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      summary: Mets à jour un plan par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - financement
  '/v1/cases/{caseId}/plans-parameters':
    parameters:
      - $ref: '#/components/parameters/caseId'
    post:
      operationId: postPlansParameters
      description: Crée un plan
      requestBody:
        content:
          application/json:
            schema:
              $ref: ../models/PlanParameters.v1.json
      responses:
        '201':
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/PlanParametersResource'
          description: Created
          headers:
            ETag:
              description: Entity tag de la resource
              schema:
                type: string
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      summary: Crée un plan
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - financement
    get:
      summary: Liste les plans
      operationId: getPlansParameters
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/PlanParametersResource'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Liste les plans
      security:
        - toaztr_auth:
            - cases/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      tags:
        - financement
  '/v1/cases/{caseId}/plans-parameters/{planId}/simulations':
    parameters:
      - schema:
          type: string
        name: caseId
        in: path
        required: true
      - schema:
          type: string
        name: planId
        in: path
        required: true
    get:
      summary: Liste les simulations
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/PaginatedResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/SimulationResource'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      operationId: getSimulations
      description: Liste les simulations
      security:
        - toaztr_auth:
            - cases/read
      parameters:
        - $ref: '#/components/parameters/page[size]'
        - $ref: '#/components/parameters/page[after]'
        - $ref: '#/components/parameters/page[before]'
      tags:
        - simulation
    post:
      summary: Crée une simulation
      operationId: postSimulation
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/SimulationResource'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '500':
          $ref: '#/components/responses/500'
      description: Crée une simulation
      parameters: []
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - simulation
  '/v1/cases/{caseId}/plans-parameters/{planId}/simulations/{id}':
    parameters:
      - $ref: '#/components/parameters/caseId'
      - $ref: '#/components/parameters/planId'
      - $ref: '#/components/parameters/id'
    get:
      summary: Retourne une simulation par ID
      tags:
        - simulation
      responses:
        '200':
          description: OK
          headers:
            ETag:
              schema:
                type: string
              description: Entity tag de la resource
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/SimulationResource'
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '500':
          $ref: '#/components/responses/500'
      operationId: getSimulationById
      description: Retourne une simulation par ID
      security:
        - toaztr_auth:
            - cases/read
    delete:
      summary: Supprime une simulation par ID
      operationId: deleteSimulation
      parameters:
        - $ref: '#/components/parameters/IfMatch'
      responses:
        '200':
          description: OK
        '400':
          $ref: '#/components/responses/400'
        '403':
          $ref: '#/components/responses/403'
        '404':
          $ref: '#/components/responses/404'
        '409':
          $ref: '#/components/responses/409'
        '500':
          $ref: '#/components/responses/500'
      description: Supprime une simulation par ID
      security:
        - toaztr_auth:
            - cases/write
      tags:
        - simulation
servers:
  - description: Serveur de production
    url: 'https://api.toaztr.com'
  - description: Server de sandbox
    url: 'https://api.sandbox.toaztr.com'
